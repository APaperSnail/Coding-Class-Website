<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.js"></script>
    <script>
        let x = [],
            y = [],
            segNum = 30,
            segLength = 18,
            colors = [
                "White", "Red", "Blue", "Green", "Yellow", "Brown", "Black", "Orange", "Purple"
            ];

        for (let i = 0; i < segNum; i++) {
            x[i] = 650;
            y[i] = 315;
        }

        function setup() {
            createCanvas(1300, 630);
            //strokeWeight(9);
            stroke(255, 0, 0, 255);
        }

        function draw() {
            background(0,0,75);
            dragSegment(0, mouseX, mouseY);
            for (let i = 0; i < x.length - 1; i++) {
                dragSegment(i + 1, x[i], y[i]);
            }
        }

        function dragSegment(i, xin, yin) {
            const dx = xin - x[i];
            const dy = yin - y[i];
            const angle = atan2(dy, dx);
            x[i] = xin - cos(angle) * segLength;
            y[i] = yin - sin(angle) * segLength;
            stroke(colors[i % colors.length])
            if (i % 2 == 1) {
                strokeWeight(18)
            } else {
                strokeWeight(9)
            }
            segment(x[i], y[i], angle);
        }

        function segment(x, y, a) {
            push();
            translate(x, y);
            rotate(a);
            line(0, 0, segLength, 0);
            pop();
        }

    </script>
</head>

<body>
    <main>
    </main>
</body>

</html>